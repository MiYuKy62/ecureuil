<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ã‰cureuil - Jeu de Cartes</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
</head>
<body>
    <div id="app">
        <!-- Ã‰cran d'accueil -->
        <div id="menu-screen" class="screen active">
            <div class="menu-container">
                <h1 class="game-title">ğŸ¿ï¸ Ã‰cureuil</h1>
                <p class="subtitle">Le jeu de cartes mÃ©moire</p>
                
                <button id="rules-btn" class="btn-rules">ğŸ“– RÃ¨gles du jeu</button>
                
                <!-- Choix du mode -->
                <div class="mode-selection">
                    <button id="local-mode-btn" class="mode-btn active">
                        <span class="mode-icon">ğŸ®</span>
                        <span class="mode-text">Local</span>
                        <span class="mode-desc">MÃªme Ã©cran</span>
                    </button>
                    <button id="online-mode-btn" class="mode-btn">
                        <span class="mode-icon">ğŸŒ</span>
                        <span class="mode-text">En ligne</span>
                        <span class="mode-desc">Avec des amis</span>
                    </button>
                </div>

                <!-- Mode Local -->
                <div id="local-setup" class="setup-section">
                    <div class="player-setup">
                        <h3>Nombre de joueurs</h3>
                        <div class="player-count-selector">
                            <button class="count-btn" data-count="2">2</button>
                            <button class="count-btn" data-count="3">3</button>
                            <button class="count-btn active" data-count="4">4</button>
                            <button class="count-btn" data-count="5">5</button>
                            <button class="count-btn" data-count="6">6</button>
                        </div>
                        
                        <div id="player-names" class="player-names">
                            <!-- Les noms seront gÃ©nÃ©rÃ©s dynamiquement -->
                        </div>
                    </div>
                    
                    <button id="start-game" class="btn-primary">Commencer la partie</button>
                </div>

                <!-- Mode En ligne -->
                <div id="online-setup" class="setup-section hidden">
                    <div class="online-options">
                        <div class="online-option">
                            <h3>CrÃ©er une partie</h3>
                            <input type="text" id="host-name" class="player-name-input" placeholder="Votre pseudo">
                            <button id="create-game" class="btn-primary">CrÃ©er</button>
                        </div>
                        
                        <div class="separator">OU</div>
                        
                        <div class="online-option">
                            <h3>Rejoindre une partie</h3>
                            <input type="text" id="join-name" class="player-name-input" placeholder="Votre pseudo">
                            <input type="text" id="game-code" class="player-name-input" placeholder="Code de la partie">
                            <button id="join-game" class="btn-primary">Rejoindre</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ã‰cran du Lobby (en ligne) -->
        <div id="lobby-screen" class="screen">
            <div class="lobby-container">
                <h2>ğŸ¿ï¸ Salon de jeu</h2>
                
                <div class="game-code-display">
                    <p>Code de la partie :</p>
                    <div class="code-box">
                        <span id="display-game-code">XXXX</span>
                        <button id="copy-code" class="btn-icon" title="Copier">ğŸ“‹</button>
                    </div>
                    <p class="code-hint">Partagez ce code avec vos amis !</p>
                </div>

                <div class="lobby-players">
                    <h3>Joueurs connectÃ©s (<span id="player-count">0</span>/6)</h3>
                    <div id="lobby-player-list" class="player-list">
                        <!-- Liste des joueurs -->
                    </div>
                </div>

                <div id="host-controls" class="host-controls">
                    <button id="start-online-game" class="btn-primary" disabled>
                        Lancer la partie (min. 2 joueurs)
                    </button>
                </div>

                <div id="waiting-message" class="waiting-message hidden">
                    <p>â³ En attente du lancement par l'hÃ´te...</p>
                </div>

                <button id="leave-lobby" class="btn-secondary">Quitter</button>
            </div>
        </div>

        <!-- Ã‰cran de jeu -->
        <div id="game-screen" class="screen">
            <!-- Tableau des scores Ã  gauche -->
            <div id="scoreboard-panel" class="scoreboard-panel">
                <div class="scoreboard-header">
                    <h3>ğŸ† Scores</h3>
                </div>
                <div id="scoreboard-content" class="scoreboard-content">
                    <!-- GÃ©nÃ©rÃ© dynamiquement -->
                </div>
            </div>

            <!-- Bouton Je ferme (positionnÃ© Ã  droite) -->
            <button id="close-round" class="btn-danger hidden">ğŸ”’ Je ferme !</button>

            <div class="game-main">
                <div class="game-header">
                    <h2 id="current-player-display">Tour de : Joueur 1</h2>
                    <p id="game-phase">Phase : Regardez vos 2 cartes du bas</p>
                    <div id="online-indicator" class="online-indicator hidden">
                        <span class="online-dot"></span> En ligne
                    </div>
                </div>

            <div class="game-area">
                <!-- Zone des adversaires (en haut) -->
                <div id="opponents-area" class="opponents-area">
                    <!-- GÃ©nÃ©rÃ© dynamiquement -->
                </div>

                <!-- Zone centrale : Pioche et DÃ©fausse -->
                <div class="center-area">
                    <div class="deck-container">
                        <div id="draw-pile" class="card card-back deck-pile">
                            <span class="deck-count" id="deck-count">48</span>
                            <span class="deck-label">Pioche</span>
                        </div>
                        <div id="discard-pile" class="card discard-pile empty">
                            <span class="deck-label">DÃ©fausse</span>
                        </div>
                    </div>
                    
                    <!-- Carte piochÃ©e -->
                    <div id="drawn-card-container" class="drawn-card-container hidden">
                        <p>Carte piochÃ©e :</p>
                        <div id="drawn-card" class="card"></div>
                        <div class="drawn-card-actions">
                            <button id="discard-drawn" class="btn-secondary">DÃ©fausser</button>
                        </div>
                    </div>
                </div>

                <!-- Zone du joueur actif (en bas) -->
                <div id="active-player-area" class="active-player-area">
                    <div class="player-info">
                        <span id="active-player-name" class="player-name">Joueur 1</span>
                    </div>
                    <div id="active-player-cards" class="player-cards">
                        <!-- 4 cartes gÃ©nÃ©rÃ©es dynamiquement -->
                    </div>
                </div>
            </div>

                <!-- Actions du tour -->
                <div class="game-actions">
                    <button id="end-look-phase" class="btn-primary hidden">J'ai mÃ©morisÃ© mes cartes</button>
                    <button id="end-my-turn" class="btn-secondary hidden">â­ï¸ Terminer mon tour</button>
                    <button id="next-turn" class="btn-primary hidden">Tour suivant</button>
                </div>
            </div> <!-- Fin game-main -->

        <!-- Modal de notification (erreur/succÃ¨s) -->
        <div id="notification-modal" class="modal hidden">
            <div class="modal-content notification-modal">
                <div id="notification-icon" class="notification-icon">âŒ</div>
                <h3 id="notification-title">Notification</h3>
                <p id="notification-message"></p>
                <button id="close-notification" class="btn-primary">OK</button>
            </div>
        </div>

        <!-- Modal pour regarder une carte -->
        <div id="peek-modal" class="modal hidden">
            <div class="modal-content">
                <h3 id="peek-modal-title">Regardez votre carte</h3>
                <div id="peek-card" class="card large"></div>
                <button id="close-peek" class="btn-primary">J'ai mÃ©morisÃ©</button>
            </div>
        </div>

        <!-- Modal de fin de manche -->
        <div id="round-end-modal" class="modal hidden">
            <div class="modal-content large">
                <h2 id="round-end-title">Fin de la manche !</h2>
                <p id="closer-result" class="closer-result"></p>
                <div id="round-results"></div>
                <div id="eliminated-players" class="eliminated-info hidden"></div>
                <button id="next-round" class="btn-primary">Manche suivante</button>
                <button id="game-over-btn" class="btn-primary hidden">Voir le classement final</button>
            </div>
        </div>

        <!-- Modal de fin de partie -->
        <div id="game-over-modal" class="modal hidden">
            <div class="modal-content large">
                <h2>ğŸ† Fin de la partie !</h2>
                <div id="final-ranking"></div>
                <button id="restart-game" class="btn-primary">Nouvelle partie</button>
            </div>
        </div>

        <!-- Modal des rÃ¨gles -->
        <div id="rules-modal" class="modal hidden">
            <div class="modal-content rules-modal">
                <button id="close-rules" class="close-modal-btn">Ã—</button>
                <h2>ğŸ“– RÃ¨gles du jeu Ã‰cureuil</h2>
                
                <div class="rules-content">
                    <section class="rule-section">
                        <h3>ğŸ¯ But du jeu</h3>
                        <p>Avoir le <strong>moins de points possible</strong> Ã  la fin de chaque manche. Le premier joueur Ã  atteindre <strong>100 points est Ã©liminÃ©</strong>. Le dernier joueur restant gagne !</p>
                    </section>

                    <section class="rule-section">
                        <h3>ğŸƒ Mise en place</h3>
                        <ul>
                            <li>Chaque joueur reÃ§oit <strong>4 cartes face cachÃ©e</strong> (2 en haut, 2 en bas)</li>
                            <li>Au dÃ©but, vous pouvez regarder vos <strong>2 cartes du bas</strong> pour les mÃ©moriser</li>
                            <li>Un premier joueur est tirÃ© au hasard</li>
                        </ul>
                    </section>

                    <section class="rule-section">
                        <h3>ğŸ”„ DÃ©roulement d'un tour</h3>
                        <p>Ã€ votre tour, vous avez <strong>3 options</strong> :</p>
                        <ol>
                            <li><strong>Piocher une carte</strong> du deck, puis :
                                <ul>
                                    <li>L'Ã©changer avec une de vos cartes (l'ancienne va Ã  la dÃ©fausse)</li>
                                    <li>Ou la dÃ©fausser directement</li>
                                </ul>
                            </li>
                            <li><strong>Prendre la carte de la dÃ©fausse</strong> et l'Ã©changer avec une de vos cartes</li>
                            <li><strong>Tenter de jeter une de vos cartes</strong> si vous pensez qu'elle a la mÃªme valeur que celle sur la dÃ©fausse :
                                <ul>
                                    <li>ğŸŸ¢ <strong>Bonne carte</strong> : elle est jetÃ©e, vous jouez avec une carte de moins !</li>
                                    <li>ğŸŸ  <strong>Mauvaise carte</strong> : vous gardez votre carte + vous piochez une carte de pÃ©nalitÃ©</li>
                                </ul>
                            </li>
                        </ol>
                    </section>

                    <section class="rule-section">
                        <h3>âš¡ Cartes d'action</h3>
                        <p>Quand vous <strong>dÃ©faussez</strong> une de ces cartes (sans l'Ã©changer), vous dÃ©clenchez son pouvoir :</p>
                        <div class="action-cards">
                            <div class="action-card">
                                <span class="card-symbol">10</span>
                                <span class="card-action">Regarder une de <strong>VOS</strong> cartes</span>
                            </div>
                            <div class="action-card">
                                <span class="card-symbol">J</span>
                                <span class="card-action">Regarder une carte d'un <strong>ADVERSAIRE</strong></span>
                            </div>
                            <div class="action-card">
                                <span class="card-symbol">Q</span>
                                <span class="card-action"><strong>Ã‰changer</strong> une de vos cartes avec celle d'un autre joueur (Ã  l'aveugle)</span>
                            </div>
                        </div>
                    </section>

                    <section class="rule-section">
                        <h3>ğŸ”’ Fermer la manche ("Je ferme !")</h3>
                        <ul>
                            <li>Si vous pensez avoir le moins de points, cliquez sur <strong>"Je ferme !"</strong></li>
                            <li>Tous les autres joueurs ont <strong>un dernier tour</strong> Ã  jouer</li>
                            <li>Ensuite, on rÃ©vÃ¨le toutes les cartes et on compte les points</li>
                            <li><strong>Bonus</strong> : si vous avez bien le moins de points â†’ <strong>-4 points</strong></li>
                            <li><strong>PÃ©nalitÃ©</strong> : sinon â†’ <strong>+10 points</strong></li>
                        </ul>
                    </section>

                    <section class="rule-section">
                        <h3>ğŸ“Š Valeur des cartes</h3>
                        <div class="points-table">
                            <div class="points-row"><span>As (A)</span><span><strong>1 point</strong></span></div>
                            <div class="points-row"><span>2 Ã  9</span><span><strong>Valeur faciale</strong></span></div>
                            <div class="points-row"><span>10, Valet (J), Dame (Q)</span><span><strong>10 points</strong></span></div>
                            <div class="points-row special black"><span>Roi Noir (â™  â™£)</span><span><strong>30 points</strong> ğŸ’€</span></div>
                            <div class="points-row special red"><span>Roi Rouge (â™¥ â™¦)</span><span><strong>-2 points</strong> â­</span></div>
                        </div>
                    </section>

                    <section class="rule-section">
                        <h3>ğŸ† Fin de partie</h3>
                        <ul>
                            <li>DÃ¨s qu'un joueur atteint <strong>100 points</strong>, il est <strong>Ã©liminÃ©</strong></li>
                            <li>La partie continue jusqu'Ã  ce qu'il ne reste qu'<strong>un seul joueur</strong></li>
                            <li>Ce joueur est dÃ©clarÃ© <strong>vainqueur</strong> !</li>
                        </ul>
                    </section>
                </div>

                <button id="close-rules-btn" class="btn-primary">J'ai compris !</button>
            </div>
        </div>
    </div>

    <script src="cards.js"></script>
    <script src="network.js"></script>
    <script src="game.js"></script>
</body>
</html>

 
 